(function(u,o,i,s,h,c,v,y,m){"use strict";const{View:p}=c.General,g=i.findByStoreName("RelationshipStore"),{TextStyleSheet:E,Text:R}=i.findByProps("TextStyleSheet"),S=i.find(function(e){return e?.name==="Timestamp"}),{parseTimestamp:T}=i.findByProps("parseTimestamp");function L(){this.listeners=[];const e=this;this.addListener=function(t){return e.listeners.push(t),function(){return e.removeListener(t)}},this.removeListener=function(t){return e.listeners=e.listeners.filter(function(n){return n!==t}),!0},this.fire=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.listeners.forEach(function(a){return a(...n)}),!0}}const{addListener:f,removeListener:b,fire:w}=new L;let l={};f(function(e,t){let n=Object.entries(g.getRelationships()).filter(function(r){let[,a]=r;return a===1}).map(function(r){let[a]=r;return a});(o.storage.everyone||n.includes(e))&&(l[e]=t)});function x(e){const[t,n]=s.React.useState(l[e]);return s.React.useEffect(function(){const r=function(a,V){a===e&&n(V)};return f(r),function(){return b(r)}},[]),t}const _=function(){function e(t){let{message:n}=t,r=n?.author?.id,a=n?.timestamp;r&&a&&w(r,Math.floor(new Date(a).getTime()/1e3-1))}return s.FluxDispatcher.subscribe("MESSAGE_CREATE",e),function(){return s.FluxDispatcher.unsubscribe("MESSAGE_CREATE",e)}};function A(e){let{id:t}=e;const n=x(t);return s.React.createElement(p,{style:{marginTop:10}},s.React.createElement(R,{style:[E["text-xs/medium"]]},"Last message: "," ",n?s.React.createElement(S,{node:{...T(n.toString(),"R"),type:"timestamp"}}):"Unknown"))}const P=function(){return h.after("default",i.find(function(e){return e?.default?.name==="UserProfileName"}),function(e,t){let[n]=e,r=t?.props?.children?.props?.children;r&&r.push(s.React.createElement(A,{id:n.user.id}))})};function B(){let e=[_(),P()];return function(){return e.forEach(function(t){return t()})}}const{FormSwitch:F,FormRow:M,FormIcon:N}=c.Forms,{ScrollView:C}=s.ReactNative,D=i.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:G}}=i.findByProps("colors","meta");G(D.theme,y.semanticColors.TEXT_NORMAL),i.findByProps("intword");function O(){v.useProxy(o.storage);const[e,t]=s.React.useState(o.storage.everyone);function n(){o.storage.everyone=!o.storage.everyone,t(o.storage.everyone)}return s.React.createElement(C,{style:{flex:1,marginTop:10}},s.React.createElement(M,{label:"Log everyone",subLabel:"Log every user instead of only friends. This might make the app slower and use more memory.",leading:s.React.createElement(N,{source:m.getAssetIDByName("ic_header_members_add_24px")}),trailing:s.React.createElement(F,{value:e,onValueChange:n}),onPress:n}))}let d=[];var U={onLoad:function(){o.storage.everyone??=!1,d.push(B())},onUnload:function(){for(const e of d)e()},settings:O};return u.default=U,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.patcher,vendetta.ui.components,vendetta.storage,vendetta.ui,vendetta.ui.assets);
