(function(y,i,e,r,u,P,g,_,w){"use strict";const h=i.findByProps("show","openLazy","close"),X={STARTING_CALL:{"en-US":"You're about to start a call."},SILENT_CALL:{"en-US":"Silent Call"}},U=new Proxy(X,{get(t,n){return t[n][e.i18n.getLocale()]??Object.values(t[n])[0]}}),{View:j}=r.General,Y=e.stylesheet.createThemedStyleSheet({text:{color:u.semanticColors.TEXT_PRIMARY}});function W(t,n){h.show({title:n?e.i18n.Messages.START_VIDEO_CALL:e.i18n.Messages.START_CALL,isDismissable:!0,children:[React.createElement(r.Forms.FormText,{style:{paddingVertical:12,color:Y.text.color}},U.STARTING_CALL),React.createElement(j,{style:{gap:8}},React.createElement(r.Button,{text:e.i18n.Messages.CALL,color:"brand",look:r.Button.Looks.FILLED,onPress:function(){h.close(),t(!1)}}),React.createElement(r.Button,{text:U.SILENT_CALL,color:"brand",look:r.Button.Looks.FILLED,onPress:function(){h.close(),t(!0)}}),React.createElement(r.Button,{text:e.i18n.Messages.CANCEL,color:r.Button.Colors.TRANSPARENT,look:r.Button.Looks.FILLED,onPress:function(){return h.close()}}))],noDefaultButtons:!0})}function J(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function K(t,n){for(var l=0;l<n.length;l++){var a=n[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function q(t,n,l){return n&&K(t.prototype,n),t}const Q={ADDED:{"en-US":"Added"},CHANGED:{"en-US":"Changed"},REMOVED:{"en-US":"Removed"},VIEW_CHANGELOG:{"en-US":"View Changelog"}},S=new Proxy(Q,{get(t,n){return t[n][e.i18n.getLocale()]??Object.values(t[n])[0]}}),{FormText:R,FormSection:Z,FormIcon:v}=r.Forms,m=r.HelpMessage,{View:ee,Pressable:te}=r.General,ne=i.findByName("Navigator")??i.findByProps("Navigator")?.Navigator,{getHeaderCloseButton:ae}=i.findByProps("getHeaderCloseButton");let F=i.findByProps("pushModal");const re=i.findByName("Svg",!1).default,le=i.findByName("Svg",!1).Path,p="fres-plugin-changelog";function ie(t){let{color:n}=t;return e.React.createElement(re,{height:"24",width:"24",viewBox:"0 0 24 24",fill:"none"},e.React.createElement(le,{d:"M 4 12 H 20",stroke:n,strokeWidth:2}))}const A=i.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:L}}=i.findByProps("colors","meta");function se(t,n){let l=t.split(".").map(Number),a=n.split(".").map(Number);for(let s=0;s<a.length;s++){if(l[s]>a[s])return-1;if(a[s]>l[s])return 1}return 0}let oe=function(){function t(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};J(this,t),this.versions={},this.title=n.title}return q(t,[{key:"add",value:function(n,l){var a;const s=(a=this.versions)[n]??(a[n]={"+":[],"=":[],"-":[]});Object.keys(l).map(function(o){return s[o].push(...l[o])})}},{key:"showModal",value:function(n){F.pushModal({key:p,modal:{key:p,modal:ue(this,n),animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}}]),t}();function ce(t){let{leading:n,title:l,style:a={}}=t;return e.React.createElement(ee,{style:{display:"flex",flexDirection:"row",gap:8,alignItems:"center",...a}},n,e.React.createElement(R,{style:{textTransform:"uppercase",color:L(A.theme,u.semanticColors.HEADER_SECONDARY),fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,fontSize:16}},l))}const ue=function(t,n){return function(){const l=L(A.theme,u.semanticColors.TEXT_NORMAL),a=L(A.theme,u.semanticColors.TEXT_MUTED);return e.React.createElement(ne,{initialRouteName:"CHANGELOG",screens:{CHANGELOG:{headerTitle:function(){return e.React.createElement(e.React.Fragment,null,e.React.createElement(R,{numberOfLines:1,style:{color:l,fontSize:18}},e.i18n.Messages.WHATS_NEW),e.React.createElement(R,{numberOfLines:1,style:{color:a,fontSize:12}},t.title||n||"Plugin"))},headerLeft:ae(function(){return F.popModal(p)}),render:function(){return Object.entries(t.versions).sort(function(s,o){let[d]=s,[E]=o;return se(d,E)}).map(function(s){let[o,d]=s;return e.React.createElement(e.React.Fragment,null,e.React.createElement(Z,{title:o,titleStyleType:"no_border"},[["+",S.ADDED,e.React.createElement(v,{source:g.getAssetIDByName("ic_add_24px")})],["=",S.CHANGED,e.React.createElement(v,{source:g.getAssetIDByName("ic_more_24px")})],["-",S.REMOVED,e.React.createElement(ie,{color:a})]].map(function(E){let[T,N,b]=E;return d[T].length?e.React.createElement(e.React.Fragment,null,e.React.createElement(ce,{leading:b,title:N,style:{marginLeft:12}}),d[T].map(function(I){return e.React.createElement(R,{style:{marginLeft:56,lineHeight:32}},I)})):null})))})}}}})}};function de(t){let{changelog:n}=t;const l={color:"rgba(0, 0, 0, 0.25)",foreground:!0,borderless:!1};function a(){n.showModal()}return e.React.createElement(e.React.Fragment,null,e.React.createElement(te,{onPress:a,android_ripple:l},e.React.createElement(m,{messageType:1},S.VIEW_CHANGELOG)))}const f={name:"SilentCall",version:"1.0.0"},O=new oe({title:f.name});O.add("1.0.0",{"+":["Initial release"]});const{ClearButtonVisibility:Ee,default:ge}=i.findByProps("ClearButtonVisibility");i.findByProps("TextStyleSheet");const x=i.findByProps("openLazy","hideActionSheet"),M=i.findByProps("ActionSheet")?.ActionSheet??i.find(function(t){return t.render?.name==="ActionSheet"});i.findByProps("BottomSheetScrollView");const{ActionSheetTitleHeader:Oe,ActionSheetCloseButton:xe,ActionSheetRow:fe}=i.findByProps("ActionSheetTitleHeader");fe??r.Forms.FormRow;function he(t,n){M?x?.openLazy(new Promise(function(l){return l({default:t})}),"ActionSheet",n):_.showToast("You cannot open ActionSheets on this version! Upgrade to 163+")}const Se={REPORT_SEND_SUCCESS:{"en-US":"Your report was sent!"},REPORT_SEND_FAILURE:{"en-US":"Failed to send report"},SELECT_DATA:{"en-US":"Please select what data you would like to send."},SEND_ID_TITLE:{"en-US":"Send your user ID"},SEND_ID_SUBTITLE:{"en-US":"Uncheck this to send an anonymous report"},SEND_DEBUG_TITLE:{"en-US":"Send debug information"},SEND_DEBUG_SUBTITLE:{"en-US":"Send your client's versions and device model"},ADD_CONTEXT:{"en-US":"Additional context or notes (optional)"},PATCH_ERROR:{"en-US":`There was an error with 1 or more patches.
Tap here to send a crash log.`},NO_ERRORS:{"en-US":"Anything's wrong? Tap here to send a bug report"}},c=new Proxy(Se,{get(t,n){return t[n][e.i18n.getLocale()]??Object.values(t[n])[0]}}),Re=r.HelpMessage,{View:V,Pressable:Te}=r.General,{FormText:ye}=r.Forms,{ActionSheetTitleHeader:_e,ActionSheetRow:G,ActionSheetSwitchRow:pe,BottomSheetTextInput:Ae,Button:Le}=i.findByProps("ActionSheetTitleHeader"),Ce=Number(w.getDebugInfo().discord.build),De=Ce<228e3?r.Forms.FormRow:G,k=pe??r.Forms.FormSwitchRow,Be=Ae??ge,Ne=Le??r.Button,C=e.stylesheet.createThemedStyleSheet({title:{fontSize:20,textAlign:"center",marginVertical:6,fontFamily:e.constants.Fonts.DISPLAY_BOLD},subtext:{fontSize:12,marginBottom:6,textAlign:"center",color:u.semanticColors.TEXT_MUTED},input:{color:u.semanticColors.TEXT_NORMAL},placeholder:{color:u.semanticColors.INPUT_PLACEHOLDER_TEXT}}),be=i.findByStoreName("UserStore");function Ie(t){let{pluginName:n,pluginVersion:l}=t;const[a,s]=e.React.useState(""),[o,d]=e.React.useState(!0),[E,T]=e.React.useState(!0);async function N(){const b=w.getDebugInfo(),I={pluginName:n,pluginVersion:l,...o&&{id:be.getCurrentUser().id},...E&&{debug:JSON.stringify(b,null,4)},...a&&{note:a}};(await fetch("https://bug-reporter.mypawsaresmall.workers.dev/",{method:"POST",body:JSON.stringify(I),headers:{"content-type":"application/json"}})).ok?_.showToast(c.REPORT_SEND_SUCCESS,g.getAssetIDByName("Check")):_.showToast(c.REPORT_SEND_FAILURE,g.getAssetIDByName("ic_close_circle")),x.hideActionSheet()}return e.React.createElement(M,null,e.React.createElement(V,null,e.React.createElement(_e,{title:e.i18n.Messages.SUBMIT_BUG}),e.React.createElement(ye,{style:C.subtext},c.SELECT_DATA),e.React.createElement(G.Group,null,e.React.createElement(k,{label:c.SEND_ID_TITLE,subLabel:c.SEND_ID_SUBTITLE,value:o,onValueChange:d}),e.React.createElement(k,{label:c.SEND_DEBUG_TITLE,subLabel:c.SEND_DEBUG_SUBTITLE,value:E,onValueChange:T}),e.React.createElement(De,{label:e.React.createElement(Be,{value:a,onChangeText:s,placeholder:c.ADD_CONTEXT,inputTextColor:C.input.color,placeholderTextColor:C.placeholder.color,clearButtonVisibility:Ee.NEVER,showBorder:!0,showTopContainer:!0,disabled:!1,autoFocus:!0,numberOfLines:1,returnKeyType:"done",maxLength:48,style:{paddingHorizontal:8,paddingVertical:0}})})),e.React.createElement(V,{style:{marginTop:24}},e.React.createElement(Ne,{text:e.i18n.Messages.SUBMIT_BUG,color:"brand",look:r.Button.Looks.FILLED,onPress:N}))))}function Pe(t){let{pluginName:n,pluginVersion:l,error:a}=t;const s={color:"rgba(0, 0, 0, 0.25)",foreground:!0,borderless:!1};function o(){he(Ie,{pluginName:n,pluginVersion:l})}return e.React.createElement(e.React.Fragment,null,e.React.createElement(Te,{onPress:o,android_ripple:s},e.React.createElement(Re,{messageType:0},a?c.PATCH_ERROR:c.NO_ERRORS)))}const{View:D}=r.General,H=e.stylesheet.createThemedStyleSheet({title:{color:u.semanticColors.TEXT_PRIMARY,fontSize:18,textAlign:"center"},sub:{color:u.semanticColors.TEXT_MUTED,fontSize:14,textAlign:"center"}});function we(){return e.React.createElement(D,{style:{margin:12,gap:12,flex:1,justifyContent:"space-around"}},e.React.createElement(D,{style:{gap:12,alignItems:"center"}},e.React.createElement(r.Forms.FormIcon,{source:g.getAssetIDByName("ic_notif_off"),style:{height:48,width:48}}),e.React.createElement(r.Forms.FormText,{style:H.title},f.name," is running!"),e.React.createElement(r.Forms.FormText,{style:H.sub},f.version)),e.React.createElement(r.Forms.FormSection,{title:"Info..."},e.React.createElement(D,{style:{gap:8}},e.React.createElement(de,{changelog:O}),e.React.createElement(Pe,{pluginName:f.name,pluginVersion:f.version,error:!1}))))}const Ue=i.findByProps("call","ring"),ve=i.findByProps("selectVoiceChannel"),z=function(t){let[n,l]=t;return W(function(a){ve.selectVoiceChannel(n.id,l,!0),a||Ue.ring(n.id)},l),[]},$=i.findByProps("handleStartCall"),B=[];var Fe={onLoad:function(){B.push(P.before("handleRedesignGroupDMCall",$,z)),B.push(P.before("handleStartCall",$,z))},onUnload:function(){for(const t of B)t()},settings:we};return y.default=Fe,Object.defineProperty(y,"__esModule",{value:!0}),y})({},vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.debug);
