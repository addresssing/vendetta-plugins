(function(l,a,d,o,S,v,n,u,f,w){"use strict";const{Text:R}=S.General,T=o.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:N}}=o.findByProps("colors","meta"),E=o.findByStoreName("UserStore"),P=o.findByStoreName("RelationshipStore"),_=o.findByStoreName("GuildMemberStore"),h=o.findByProps("TYPING_WRAPPER_HEIGHT");function b(){return d.after("default",h,function(r,y){let[{channel:g}]=r;if(!y||!n.storage.show.showTyping)return;const I=y.props?.children,A=N(T.theme,v.semanticColors.HEADER_SECONDARY),F=d.after("type",I,function(U,G){a.React.useEffect(function(){return function(){F()}},[]);const i=G?.props?.children?.[0]?.props?.children?.[1]?.props;if(!i||!i.children||i.children==="Several people are typing...")return;const e=h.useTypingUserIds(g.id).map(function(t){const s=_.getMember(g.guild_id,t),m=E.getUser(t),M=s?.nick||P.getNickname(t)||m.globalName||m.username,L=s?.colorString||A;return{displayName:M,displayColor:L}});function c(t){return a.React.createElement(R,{style:{color:t.displayColor,fontFamily:a.constants.Fonts.DISPLAY_BOLD}},t.displayName)}!e||e.length<1||(i.children=e.length===1?[c(e[0])," is typing..."]:[...e.slice(0,e.length-1).flatMap(function(t,s){return[c(t),s<e.length-2?", ":" and "]}),c(e[e.length-1])," are typing..."])})})}const B={Typing:w.getAssetIDByName("ic_messages")};function C(){return f.useProxy(n.storage),React.createElement(a.ReactNative.ScrollView,{style:{flex:1}},React.createElement(FormSection,{title:"Where to show the top role color?",titleStyleType:"no_border"},React.createElement(u.FormSwitchRow,{label:"Show in typing",subLabel:"Display the top role color in the typing bar.",leading:React.createElement(u.FormIcon,{source:B.Typing}),value:n.storage.show.showTyping,onValueChange:function(r){return n.storage.show.showTyping=r}})))}let p=[];var D={onLoad:function(){n.storage.show||(f.useProxy(n.storage),n.storage.show={showTyping:!0}),p.push(b())},onUnload:function(){for(const r of p)r()},settings:C};return l.default=D,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta.ui.components,vendetta.ui,vendetta.plugin,vendetta.ui.components.Forms,vendetta.storage,vendetta.ui.assets);
