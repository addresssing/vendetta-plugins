(function(p,r,s,e,u,E,D,S,P){"use strict";const{getGuildFolders:B}=s.findByStoreName("UserSettingsProtoStore"),{isFolderExpanded:L}=s.findByStoreName("ExpandedGuildFolderStore");function y(){B().filter(function(t){return t.folderId&&!L(t.folderId)}).forEach(function(t){let{folderId:a}=t;e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:a}),e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:a})})}const{View:C,Image:_}=D.General;function A(){let t=E.after("GuildContainer",s.findByPropsAll("GuildContainer").at(-1),function(a,d){let[n]=a;if(!r.storage.hideIcons)return;let o=n?.children?.type;if(!o?.type){if(n.expanded)return;let l=n?.children?.props;if(!l?.children?.[1])return;let c=l?.children?.[0]?.props?.style?.[1]?.backgroundColor;if(!c)return;l.children[1]=e.React.createElement(C,{style:{overflow:"hidden",borderRadius:16,justifyContent:"center",alignItems:"center",height:48,width:48}},e.React.createElement(_,{source:u.getAssetIDByName("img_guild_folder"),style:{tintColor:c}}));return}let i=E.after("type",o,function(l,c){let[h]=l;i(),!n.expanded&&(c.props.children[1]=e.React.createElement(C,{style:{overflow:"hidden",borderRadius:16,justifyContent:"center",alignItems:"center",height:48,width:48}},e.React.createElement(_,{source:u.getAssetIDByName("img_guild_folder"),style:h.folderColor?{tintColor:`#${h.folderColor.toString(16)}`}:{}})))})});return y(),function(){setTimeout(function(){return y()},100),t()}}const{getGuildFolders:O}=s.findByStoreName("UserSettingsProtoStore"),{isFolderExpanded:v}=s.findByStoreName("ExpandedGuildFolderStore");function x(){let t=function(a){let{folderId:d}=a;r.storage.autoCollapse&&v(d)&&O().filter(function(n){return n.folderId&&v(n.folderId)}).forEach(function(n){let{folderId:o}=n;o!==d&&e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:o})})};return e.FluxDispatcher.subscribe("TOGGLE_GUILD_FOLDER_EXPAND",t),function(){return e.FluxDispatcher.unsubscribe("TOGGLE_GUILD_FOLDER_EXPAND",t)}}const{useState:w}=e.React,{Pressable:T,Animated:f}=e.ReactNative;function F(t){let{onPress:a,children:d,color:n,pressedColor:o}=t;const[i]=w(new f.Value(0)),l=i.interpolate({inputRange:[0,1],outputRange:[n,o]}),c=function(){f.timing(i,{toValue:1,duration:200,useNativeDriver:!1}).start()},h=function(){f.timing(i,{toValue:0,duration:200,useNativeDriver:!1}).start()};return e.React.createElement(T,{onPress:a,onPressIn:c,onPressOut:h},e.React.createElement(f.View,{style:{backgroundColor:l}},d))}const{FormSwitch:G,FormRow:b,FormIcon:N}=D.Forms,{ScrollView:U}=e.ReactNative,$=s.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:V}}=s.findByProps("colors","meta"),g={bgBrighter:V($.theme,P.semanticColors.BACKGROUND_ACCENT)};var I=!0;function X(){S.useProxy(r.storage);const[t,a]=e.React.useState(r.storage.autoCollapse),[d,n]=e.React.useState(r.storage.hideIcons);function o(){r.storage.autoCollapse=!r.storage.autoCollapse,a(r.storage.autoCollapse)}function i(){if(r.storage.hideIcons=!r.storage.hideIcons,I){let l=E.after("useIsModalOpen",s.findByProps("useIsModalOpen"),function(){l(),setTimeout(function(){return y()},100),I=!0});I=!1}n(r.storage.hideIcons)}return e.React.createElement(U,{style:{flex:1,marginTop:10}},e.React.createElement(F,{onPress:o,color:g.bgBrighter+"00",pressedColor:g.bgBrighter+"FF"},e.React.createElement(b,{label:"Auto collapse",subLabel:"Automatically collapse folders as you expand different ones.",leading:e.React.createElement(N,{source:u.getAssetIDByName("ic_minus_circle_24px")}),trailing:e.React.createElement(G,{value:t,onValueChange:o})})),e.React.createElement(F,{onPress:i,color:g.bgBrighter+"00",pressedColor:g.bgBrighter+"FF"},e.React.createElement(b,{label:"Hide icons",subLabel:"Don't display server icons for collapsed folders.",leading:e.React.createElement(N,{source:u.getAssetIDByName("ic_hide")}),trailing:e.React.createElement(G,{value:d,onValueChange:i})})))}let R=[];var j={onLoad:function(){var t,a;(t=r.storage).hideIcons??(t.hideIcons=!1),(a=r.storage).autoCollapse??(a.autoCollapse=!1),R.push(A()),R.push(x())},onUnload:function(){for(const t of R)t()},settings:X};return p.default=j,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.ui.assets,vendetta.patcher,vendetta.ui.components,vendetta.storage,vendetta.ui);
