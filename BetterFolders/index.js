(function(p,a,o,e,u,y,R,N,S){"use strict";const{View:I,Image:D}=R.General,{getGuildFolders:B}=o.findByStoreName("UserSettingsProtoStore"),{isFolderExpanded:L}=o.findByStoreName("ExpandedGuildFolderStore");function _(){B().filter(function(t){return t.folderId&&!L(t.folderId)}).forEach(function(t){let{folderId:l}=t;e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:l}),e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:l})})}function P(){let t=y.after("GuildContainer",o.findByPropsAll("GuildContainer").at(-1),function(l,i){let[r]=l,n=r?.children?.type;if(!n?.type){if(r.expanded)return;let d=r?.children?.props;if(!d?.children?.[1])return;let c=d?.children?.[0]?.props?.style?.[1]?.backgroundColor;if(!c)return;d.children[1]=e.React.createElement(I,{style:{overflow:"hidden",borderRadius:16,justifyContent:"center",alignItems:"center",height:48,width:48}},e.React.createElement(D,{source:u.getAssetIDByName("img_guild_folder"),style:{tintColor:c}}));return}let s=y.after("type",n,function(d,c){let[h]=d;s(),!r.expanded&&(c.props.children[1]=e.React.createElement(I,{style:{overflow:"hidden",borderRadius:16,justifyContent:"center",alignItems:"center",height:48,width:48}},e.React.createElement(D,{source:u.getAssetIDByName("img_guild_folder"),style:h.folderColor?{tintColor:`#${h.folderColor.toString(16)}`}:{}})))})});return _(),function(){_(),t()}}const{getGuildFolders:A}=o.findByStoreName("UserSettingsProtoStore"),{isFolderExpanded:C}=o.findByStoreName("ExpandedGuildFolderStore");function x(){let t=function(l){let{folderId:i}=l;C(i)&&A().filter(function(r){return r.folderId&&C(r.folderId)}).forEach(function(r){let{folderId:n}=r;n!==i&&e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:n})})};return e.FluxDispatcher.subscribe("TOGGLE_GUILD_FOLDER_EXPAND",t),function(){return e.FluxDispatcher.unsubscribe("TOGGLE_GUILD_FOLDER_EXPAND",t)}}const{useState:O}=e.React,{Pressable:w,Animated:f}=e.ReactNative;function F(t){let{onPress:l,children:i,color:r,pressedColor:n}=t;const[s]=O(new f.Value(0)),d=s.interpolate({inputRange:[0,1],outputRange:[r,n]}),c=function(){f.timing(s,{toValue:1,duration:200,useNativeDriver:!1}).start()},h=function(){f.timing(s,{toValue:0,duration:200,useNativeDriver:!1}).start()};return e.React.createElement(w,{onPress:l,onPressIn:c,onPressOut:h},e.React.createElement(f.View,{style:{backgroundColor:d}},i))}const{FormSwitch:G,FormRow:v,FormIcon:b}=R.Forms,{ScrollView:U}=e.ReactNative,T=o.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:V}}=o.findByProps("colors","meta"),g={bgBrighter:V(T.theme,S.semanticColors.BACKGROUND_ACCENT)};function $(){N.useProxy(a.storage);const[t,l]=e.React.useState(a.storage.autoCollapse),[i,r]=e.React.useState(a.storage.hideIcons);function n(){a.storage.autoCollapse=!a.storage.autoCollapse,l(a.storage.autoCollapse)}function s(){a.storage.hideIcons=!a.storage.hideIcons,r(a.storage.hideIcons)}return e.React.createElement(U,{style:{flex:1,marginTop:10}},e.React.createElement(F,{onPress:n,color:g.bgBrighter+"00",pressedColor:g.bgBrighter+"FF"},e.React.createElement(v,{label:"Auto collapse",subLabel:"Automatically collapse folders as you expand different ones.",leading:e.React.createElement(b,{source:u.getAssetIDByName("ic_minus_circle_24px")}),trailing:e.React.createElement(G,{value:t,onValueChange:n})})),e.React.createElement(F,{onPress:n,color:g.bgBrighter+"00",pressedColor:g.bgBrighter+"FF"},e.React.createElement(v,{label:"Hide icons",subLabel:"Don't display server icons for collapsed folders.",leading:e.React.createElement(b,{source:u.getAssetIDByName("ic_hide_media")}),trailing:e.React.createElement(G,{value:i,onValueChange:s})})))}let E=[];var X={onLoad:function(){a.storage.hideIcons??=!1,a.storage.autoCollapse??=!1,E.push(P()),E.push(x())},onUnload:function(){for(const t of E)t()},settings:$};return p.default=X,Object.defineProperty(p,"__esModule",{value:!0}),p})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.ui.assets,vendetta.patcher,vendetta.ui.components,vendetta.storage,vendetta.ui);
