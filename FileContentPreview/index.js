(function(c,n,d,w,p,b,e,h){"use strict";n.findByName("RowManager");const B=n.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:T}}=n.findByProps("colors","meta"),{View:m,Text:y,TouchableOpacity:E}=h.General,{FormIcon:P,FormText:C}=h.Forms,{ActivityIndicator:N}=e.ReactNative,{default:I,getRenderCloseButton:L}=n.findByProps("getRenderCloseButton"),R=n.findByProps("pushModal"),k=n.findByProps("intword"),_=p.getAssetIDByName("ic_download_24px");function x(t){return function(){return e.React.createElement(E,{onPress:t},e.React.createElement(P,{source:_,style:{marginRight:8,marginLeft:-8,opacity:1}}))}}function S(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"https://cdn.discordapp.com/attachments/593084706593964043/1143675462376239236/SPOILER_a.txt",u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return function(){const[a,o]=e.React.useState("");fetch(s,{headers:{Range:"bytes=0-10000"}}).then(function(i){i.ok?i.text().then(function(g){o(g)}):o("Error reading file content: Network response was not ok")});let l=e.React.createElement(m,{style:{margin:32}},e.React.createElement(N,{size:"large"})),r=e.React.createElement(m,{style:{margin:15}},e.React.createElement(C,null,a));return e.React.createElement(I,{initialRouteName:"FILE_CONTENT_PREVIEW",screens:{FILE_CONTENT_PREVIEW:{headerLeft:L(function(){return R.popModal("file-content-preview")}),headerRight:x(function(){console.log("uwu")}),render:function(){return a?r:l},headerTitle:function(){let i=T(B.theme,w.semanticColors.HEADER_PRIMARY);return e.React.createElement(E,{onPress:function(){e.clipboard.setString(t),b.showToast("Copied content to clipboard",p.getAssetIDByName("toast_copy_link"))}},e.React.createElement(y,{numberOfLines:1,style:{color:i}},t),e.React.createElement(y,{numberOfLines:1,style:{color:i,fontSize:12}},k.intword(u,["bytes","KB","MB","GB","TB","PB"],1024)))}}}})}}const M=n.findByStoreName("MessageStore"),O=n.findByStoreName("SelectedChannelStore");function A(){return d.after("render",n.findByName("Chat").prototype,function(t,s){s.props.hasOwnProperty("onTapInviteEmbed")&&d.before("onTapInviteEmbed",s.props,function(u){let[{nativeEvent:{index:a,messageId:o}}]=u,l=O.getChannelId(),r=M.getMessage(l,o),i=r.codedLinks,g=r.attachments;if(a>=i.length){let U=a-i.length,v=g[U];R.pushModal({key:"file-content-preview",modal:{key:"file-content-preview",modal:S("uwu",v.url,v.size),animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}})})}const F=n.findByName("RowManager");function z(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown";return{borderColor:-251658241,backgroundColor:-13947599,thumbnailCornerRadius:15,headerColor:-4867391,headerText:"",acceptLabelBackgroundColor:-14441126,titleText:"FILE \u2014 "+(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"? bytes"),type:null,extendedType:4,participantAvatarUris:[],acceptLabelText:"Preview",noParticipantsText:`
`+t,ctaEnabled:!0}}function D(){return d.after("generate",F.prototype,function(t,s){let[u]=t,{message:a}=s;if(u.rowType!=1||!a.attachments)return;let o=[],l=[];a.attachments.forEach(function(r){r.filename.toLowerCase().endsWith(".txt")?o.push(z(r.filename,r.size)):l.push(r)}),o.length&&(a.codedLinks.push(...o),a.attachments=l)})}let f=[];var V={onLoad:function(){f.push(A()),f.push(D())},onUnload:function(){for(const t of f)t()}};return c.default=V,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.metro,vendetta.patcher,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.metro.common,vendetta.ui.components);
