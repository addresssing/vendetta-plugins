(function(l,a,d,o,S,v,n,u,f){"use strict";const{Text:w}=S.General,R=o.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:T}}=o.findByProps("colors","meta"),E=o.findByStoreName("UserStore"),N=o.findByStoreName("RelationshipStore"),P=o.findByStoreName("GuildMemberStore"),h=o.findByProps("TYPING_WRAPPER_HEIGHT");function b(){return d.after("default",h,function(r,y){let[{channel:g}]=r;if(!y||!n.storage.show.showTyping)return;const C=y.props?.children,I=T(R.theme,v.semanticColors.HEADER_SECONDARY),D=d.after("type",C,function(M,A){a.React.useEffect(function(){return function(){D()}},[]);const i=A?.props?.children?.[0]?.props?.children?.[1]?.props;if(!i||!i.children||i.children==="Several people are typing...")return;const e=h.useTypingUserIds(g.id).map(function(t){const s=P.getMember(g.guild_id,t),m=E.getUser(t),F=s?.nick||N.getNickname(t)||m.globalName||m.username,G=s?.colorString||I;return{displayName:F,displayColor:G}});function c(t){return a.React.createElement(w,{style:{color:t.displayColor,fontFamily:a.constants.Fonts.DISPLAY_BOLD}},t.displayName)}!e||e.length<1||(i.children=e.length===1?[c(e[0])," is typing..."]:[...e.slice(0,e.length-1).flatMap(function(t,s){return[c(t),s<e.length-2?", ":" and "]}),c(e[e.length-1])," are typing..."])})})}function _(){return f.useProxy(n.storage),React.createElement(a.ReactNative.ScrollView,{style:{flex:1}},React.createElement(FormSection,{title:"Where to show the top role color?",titleStyleType:"no_border"},React.createElement(u.FormSwitchRow,{label:"Show in typing",subLabel:"Display the top role color in the typing bar.",leading:React.createElement(u.FormIcon,{source:Icons.Typing}),value:n.storage.show.showTyping,onValueChange:function(r){return n.storage.show.showTyping=r}})))}let p=[];var B={onLoad:function(){n.storage.show||(f.useProxy(n.storage),n.storage.show={showTyping:!0}),p.push(b())},onUnload:function(){for(const r of p)r()},settings:_};return l.default=B,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta.ui.components,vendetta.ui,vendetta.plugin,vendetta.ui.components.Forms,vendetta.storage);
