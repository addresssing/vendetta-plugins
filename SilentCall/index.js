(function(y,i,e,r,u,w,g,_,U){"use strict";const h=i.findByProps("show","openLazy","close"),Y={STARTING_CALL:{"en-US":"You're about to start a call."},SILENT_CALL:{"en-US":"Silent Call"}},F=new Proxy(Y,{get(n,t){return n[t][e.i18n.getLocale()]??Object.values(n[t])[0]}}),{View:W}=r.General,J=e.stylesheet.createThemedStyleSheet({text:{color:u.semanticColors.TEXT_PRIMARY}});function K(n,t){h.show({title:t?e.i18n.Messages.START_VIDEO_CALL:e.i18n.Messages.START_CALL,isDismissable:!0,children:[React.createElement(r.Forms.FormText,{style:{paddingVertical:12,color:J.text.color}},F.STARTING_CALL),React.createElement(W,{style:{gap:8}},React.createElement(r.Button,{text:e.i18n.Messages.CALL,color:"brand",look:r.Button.Looks.FILLED,onPress:function(){h.close(),n(!1)}}),React.createElement(r.Button,{text:F.SILENT_CALL,color:"brand",look:r.Button.Looks.FILLED,onPress:function(){h.close(),n(!0)}}),React.createElement(r.Button,{text:e.i18n.Messages.CANCEL,color:r.Button.Colors.TRANSPARENT,look:r.Button.Looks.FILLED,onPress:function(){return h.close()}}))],noDefaultButtons:!0})}function q(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(n,t){for(var l=0;l<t.length;l++){var a=t[l];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(n,a.key,a)}}function Z(n,t,l){return t&&Q(n.prototype,t),n}const m={ADDED:{"en-US":"Added"},CHANGED:{"en-US":"Changed"},REMOVED:{"en-US":"Removed"},VIEW_CHANGELOG:{"en-US":"View Changelog"}},S=new Proxy(m,{get(n,t){return n[t][e.i18n.getLocale()]??Object.values(n[t])[0]}});var p;const{FormText:R,FormSection:ee,FormIcon:O}=r.Forms,te=r.HelpMessage,{View:ne,Pressable:ae}=r.General,re=i.findByName("Navigator")??((p=i.findByProps("Navigator"))===null||p===void 0?void 0:p.Navigator),{getHeaderCloseButton:le}=i.findByProps("getHeaderCloseButton");let M=i.findByProps("pushModal");const ie=i.findByName("Svg",!1).default,se=i.findByName("Svg",!1).Path,A="fres-plugin-changelog";function oe(n){let{color:t}=n;return e.React.createElement(ie,{height:"24",width:"24",viewBox:"0 0 24 24",fill:"none"},e.React.createElement(se,{d:"M 4 12 H 20",stroke:t,strokeWidth:2}))}const L=i.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:C}}=i.findByProps("colors","meta");function ce(n,t){let l=n.split(".").map(Number),a=t.split(".").map(Number);for(let s=0;s<a.length;s++){if(l[s]>a[s])return-1;if(a[s]>l[s])return 1}return 0}let ue=function(){function n(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};q(this,n),this.versions={},this.title=t.title}return Z(n,[{key:"add",value:function(t,l){var a;const s=(a=this.versions)[t]??(a[t]={"+":[],"=":[],"-":[]});Object.keys(l).map(function(o){return s[o].push(...l[o])})}},{key:"showModal",value:function(t){M.pushModal({key:A,modal:{key:A,modal:Ee(this,t),animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}}]),n}();function de(n){let{leading:t,title:l,style:a={}}=n;return e.React.createElement(ne,{style:{display:"flex",flexDirection:"row",gap:8,alignItems:"center",...a}},t,e.React.createElement(R,{style:{textTransform:"uppercase",color:C(L.theme,u.semanticColors.HEADER_SECONDARY),fontFamily:e.constants.Fonts.PRIMARY_MEDIUM,fontSize:16}},l))}const Ee=function(n,t){return function(){const l=C(L.theme,u.semanticColors.TEXT_NORMAL),a=C(L.theme,u.semanticColors.TEXT_MUTED);return e.React.createElement(re,{initialRouteName:"CHANGELOG",screens:{CHANGELOG:{headerTitle:function(){return e.React.createElement(e.React.Fragment,null,e.React.createElement(R,{numberOfLines:1,style:{color:l,fontSize:18}},e.i18n.Messages.WHATS_NEW),e.React.createElement(R,{numberOfLines:1,style:{color:a,fontSize:12}},n.title||t||"Plugin"))},headerLeft:le(function(){return M.popModal(A)}),render:function(){return Object.entries(n.versions).sort(function(s,o){let[d]=s,[E]=o;return ce(d,E)}).map(function(s){let[o,d]=s;return e.React.createElement(e.React.Fragment,null,e.React.createElement(ee,{title:o,titleStyleType:"no_border"},[["+",S.ADDED,e.React.createElement(O,{source:g.getAssetIDByName("ic_add_24px")})],["=",S.CHANGED,e.React.createElement(O,{source:g.getAssetIDByName("ic_more_24px")})],["-",S.REMOVED,e.React.createElement(oe,{color:a})]].map(function(E){let[T,v,I]=E;return d[T].length?e.React.createElement(e.React.Fragment,null,e.React.createElement(de,{leading:I,title:v,style:{marginLeft:12}}),d[T].map(function(P){return e.React.createElement(R,{style:{marginLeft:56,lineHeight:32}},P)})):null})))})}}}})}};function ge(n){let{changelog:t}=n;const l={color:"rgba(0, 0, 0, 0.25)",foreground:!0,borderless:!1};function a(){t.showModal()}return e.React.createElement(e.React.Fragment,null,e.React.createElement(ae,{onPress:a,android_ripple:l},e.React.createElement(te,{messageType:1},S.VIEW_CHANGELOG)))}const f={name:"SilentCall",version:"1.0.0"},x=new ue({title:f.name});x.add("1.0.0",{"+":["Initial release"]});var D;const{ClearButtonVisibility:fe,default:he}=i.findByProps("ClearButtonVisibility");i.findByProps("TextStyleSheet");const V=i.findByProps("openLazy","hideActionSheet"),G=((D=i.findByProps("ActionSheet"))===null||D===void 0?void 0:D.ActionSheet)??i.find(function(n){var t;return((t=n.render)===null||t===void 0?void 0:t.name)==="ActionSheet"});i.findByProps("BottomSheetScrollView");const{ActionSheetTitleHeader:xe,ActionSheetCloseButton:Ve,ActionSheetRow:Se}=i.findByProps("ActionSheetTitleHeader");Se??r.Forms.FormRow;function Re(n,t){G?V?.openLazy(new Promise(function(l){return l({default:n})}),"ActionSheet",t):_.showToast("You cannot open ActionSheets on this version! Upgrade to 163+")}const Te={REPORT_SEND_SUCCESS:{"en-US":"Your report was sent!"},REPORT_SEND_FAILURE:{"en-US":"Failed to send report"},SELECT_DATA:{"en-US":"Please select what data you would like to send."},SEND_ID_TITLE:{"en-US":"Send your user ID"},SEND_ID_SUBTITLE:{"en-US":"Uncheck this to send an anonymous report"},SEND_DEBUG_TITLE:{"en-US":"Send debug information"},SEND_DEBUG_SUBTITLE:{"en-US":"Send your client's versions and device model"},ADD_CONTEXT:{"en-US":"Additional context or notes (optional)"},PATCH_ERROR:{"en-US":`There was an error with 1 or more patches.
Tap here to send a crash log.`},NO_ERRORS:{"en-US":"Anything's wrong? Tap here to send a bug report"}},c=new Proxy(Te,{get(n,t){return n[t][e.i18n.getLocale()]??Object.values(n[t])[0]}}),ye=r.HelpMessage,{View:k,Pressable:_e}=r.General,{FormText:pe}=r.Forms,{ActionSheetTitleHeader:Ae,ActionSheetRow:H,ActionSheetSwitchRow:Le,BottomSheetTextInput:Ce,Button:De}=i.findByProps("ActionSheetTitleHeader"),Be=Number(U.getDebugInfo().discord.build),Ne=Be<228e3?r.Forms.FormRow:H,$=Le??r.Forms.FormSwitchRow,be=Ce??he,ve=De??r.Button,B=e.stylesheet.createThemedStyleSheet({title:{fontSize:20,textAlign:"center",marginVertical:6,fontFamily:e.constants.Fonts.DISPLAY_BOLD},subtext:{fontSize:12,marginBottom:6,textAlign:"center",color:u.semanticColors.TEXT_MUTED},input:{color:u.semanticColors.TEXT_NORMAL},placeholder:{color:u.semanticColors.INPUT_PLACEHOLDER_TEXT}}),Ie=i.findByStoreName("UserStore");function Pe(n){let{pluginName:t,pluginVersion:l}=n;const[a,s]=e.React.useState(""),[o,d]=e.React.useState(!0),[E,T]=e.React.useState(!0);async function v(){const I=U.getDebugInfo(),P={pluginName:t,pluginVersion:l,...o&&{id:Ie.getCurrentUser().id},...E&&{debug:JSON.stringify(I,null,4)},...a&&{note:a}};(await fetch("https://bug-reporter.mypawsaresmall.workers.dev/",{method:"POST",body:JSON.stringify(P),headers:{"content-type":"application/json"}})).ok?_.showToast(c.REPORT_SEND_SUCCESS,g.getAssetIDByName("Check")):_.showToast(c.REPORT_SEND_FAILURE,g.getAssetIDByName("ic_close_circle")),V.hideActionSheet()}return e.React.createElement(G,null,e.React.createElement(k,null,e.React.createElement(Ae,{title:e.i18n.Messages.SUBMIT_BUG}),e.React.createElement(pe,{style:B.subtext},c.SELECT_DATA),e.React.createElement(H.Group,null,e.React.createElement($,{label:c.SEND_ID_TITLE,subLabel:c.SEND_ID_SUBTITLE,value:o,onValueChange:d}),e.React.createElement($,{label:c.SEND_DEBUG_TITLE,subLabel:c.SEND_DEBUG_SUBTITLE,value:E,onValueChange:T}),e.React.createElement(Ne,{label:e.React.createElement(be,{value:a,onChangeText:s,placeholder:c.ADD_CONTEXT,inputTextColor:B.input.color,placeholderTextColor:B.placeholder.color,clearButtonVisibility:fe.NEVER,showBorder:!0,showTopContainer:!0,disabled:!1,autoFocus:!0,numberOfLines:1,returnKeyType:"done",maxLength:48,style:{paddingHorizontal:8,paddingVertical:0}})})),e.React.createElement(k,{style:{marginTop:24}},e.React.createElement(ve,{text:e.i18n.Messages.SUBMIT_BUG,color:"brand",look:r.Button.Looks.FILLED,onPress:v}))))}function we(n){let{pluginName:t,pluginVersion:l,error:a}=n;const s={color:"rgba(0, 0, 0, 0.25)",foreground:!0,borderless:!1};function o(){Re(Pe,{pluginName:t,pluginVersion:l})}return e.React.createElement(e.React.Fragment,null,e.React.createElement(_e,{onPress:o,android_ripple:s},e.React.createElement(ye,{messageType:0},a?c.PATCH_ERROR:c.NO_ERRORS)))}const{View:N}=r.General,z=e.stylesheet.createThemedStyleSheet({title:{color:u.semanticColors.TEXT_PRIMARY,fontSize:18,textAlign:"center"},sub:{color:u.semanticColors.TEXT_MUTED,fontSize:14,textAlign:"center"}});function Ue(){return e.React.createElement(N,{style:{margin:12,gap:12,flex:1,justifyContent:"space-around"}},e.React.createElement(N,{style:{gap:12,alignItems:"center"}},e.React.createElement(r.Forms.FormIcon,{source:g.getAssetIDByName("ic_notif_off"),style:{height:48,width:48}}),e.React.createElement(r.Forms.FormText,{style:z.title},f.name," is running!"),e.React.createElement(r.Forms.FormText,{style:z.sub},f.version)),e.React.createElement(r.Forms.FormSection,{title:"Info..."},e.React.createElement(N,{style:{gap:8}},e.React.createElement(ge,{changelog:x}),e.React.createElement(we,{pluginName:f.name,pluginVersion:f.version,error:!1}))))}const Fe=i.findByProps("call","ring"),Oe=i.findByProps("selectVoiceChannel"),X=function(n){let[t,l]=n;return K(function(a){Oe.selectVoiceChannel(t.id,l,!0),a||Fe.ring(t.id)},l),[]},j=i.findByProps("handleStartCall"),b=[];var Me={onLoad:function(){b.push(w.before("handleRedesignGroupDMCall",j,X)),b.push(w.before("handleStartCall",j,X))},onUnload:function(){for(const n of b)n()},settings:Ue};return y.default=Me,Object.defineProperty(y,"__esModule",{value:!0}),y})({},vendetta.metro,vendetta.metro.common,vendetta.ui.components,vendetta.ui,vendetta.patcher,vendetta.ui.assets,vendetta.ui.toasts,vendetta.debug);
