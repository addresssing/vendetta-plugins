(function(a,S,N,M){"use strict";const u=S.findByProps("sendMessage","receiveMessage"),L=S.findByStoreName("SelectedChannelStore"),H=S.findByStoreName("UserStore");function X(_){return N.before("sendMessage",u,function(c){let G=c[1].content,f=H.getCurrentUser().premiumType==2?_.MAX_MESSAGE_LENGTH_PREMIUM:_.MAX_MESSAGE_LENGTH;if(G.length<=f)return;function l(t,e,s){let i=[" ",`
`];function n(P,T){let o=-1;return P.forEach(function(h){T.lastIndexOf(h)>o&&(o=T.lastIndexOf(h))}),o}if(t.length<e)return{str:t,remaining:""};s>e&&(s=0);let r=t.substring(0,e),g=n(i,r.slice(-s));return g>-1&&(r=r.substring(0,r.length-s+g+1)),{str:r,remaining:t.substring(r.length,t.length)}}function U(t,e,s){let i=[],n=l(t,e,s);do i.push(n.str),n=l(n.remaining,e,s);while(n.remaining.length!="");return n.str!=""&&i.push(n.str),i}var d=U(G,f,50);d.slice(1).forEach(function(t,e){setTimeout(function(){u.sendMessage(L.getChannelId(),{content:t})},200*(e+1))}),c[1].content=d[0]})}let A=[],E={};var I={onLoad:function(){E.MAX_MESSAGE_LENGTH=M.constants.MAX_MESSAGE_LENGTH,E.MAX_MESSAGE_LENGTH_PREMIUM=M.constants.MAX_MESSAGE_LENGTH_PREMIUM,M.constants.MAX_MESSAGE_LENGTH=1e4,M.constants.MAX_MESSAGE_LENGTH_PREMIUM=1e4,A.push(X(E))},onUnload:function(){E.MAX_MESSAGE_LENGTH&&(M.constants.MAX_MESSAGE_LENGTH=E.MAX_MESSAGE_LENGTH),E.MAX_MESSAGE_LENGTH_PREMIUM&&(M.constants.MAX_MESSAGE_LENGTH_PREMIUM=E.MAX_MESSAGE_LENGTH_PREMIUM);for(const _ of A)_()}};return a.default=I,Object.defineProperty(a,"__esModule",{value:!0}),a})({},vendetta.metro,vendetta.patcher,vendetta.metro.common);
