(function(c,a,d,b,p,w,e,h){"use strict";const B=a.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:T}}=a.findByProps("colors","meta"),{View:m,Text:y,TouchableOpacity:v}=h.General,{FormIcon:P,FormText:C}=h.Forms,{ActivityIndicator:I}=e.ReactNative,{default:L,getRenderCloseButton:N}=a.findByProps("getRenderCloseButton"),E=a.findByProps("pushModal"),_=a.findByProps("intword"),k=p.getAssetIDByName("ic_download_24px");function x(t){return function(){return e.React.createElement(v,{onPress:t},e.React.createElement(P,{source:k,style:{marginRight:8,marginLeft:-8,opacity:1}}))}}function S(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown",s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"https://cdn.discordapp.com/attachments/593084706593964043/1143675462376239236/SPOILER_a.txt",u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return function(){const[n,o]=e.React.useState("");fetch(s,{headers:{Range:"bytes=0-10000"}}).then(function(i){i.ok?i.text().then(function(g){o(g)}):o("Error reading file content: Network response was not ok")});let l=e.React.createElement(m,{style:{margin:32}},e.React.createElement(I,{size:"large"})),r=e.React.createElement(m,{style:{margin:15}},e.React.createElement(C,null,n));return e.React.createElement(L,{initialRouteName:"FILE_CONTENT_PREVIEW",screens:{FILE_CONTENT_PREVIEW:{headerLeft:N(function(){return E.popModal("file-content-preview")}),headerRight:x(function(){console.log("uwu")}),render:function(){return n?r:l},headerTitle:function(){let i=T(B.theme,b.semanticColors.HEADER_PRIMARY);return e.React.createElement(v,{onPress:function(){e.clipboard.setString(t),w.showToast("Copied filename to clipboard",p.getAssetIDByName("toast_copy_message"))}},e.React.createElement(y,{numberOfLines:1,style:{color:i}},t),e.React.createElement(y,{numberOfLines:1,style:{color:i,fontSize:12}},_.intword(u,["bytes","KB","MB","GB","TB","PB"],1024,void 0,void 0,void 0," ")))}}}})}}const M=a.findByStoreName("MessageStore"),O=a.findByStoreName("SelectedChannelStore");function A(){return d.after("render",a.findByName("Chat").prototype,function(t,s){s.props.hasOwnProperty("onTapInviteEmbed")&&d.before("onTapInviteEmbed",s.props,function(u){let[{nativeEvent:{index:n,messageId:o}}]=u,l=O.getChannelId(),r=M.getMessage(l,o),i=r.codedLinks,g=r.attachments;if(n>=i.length){let U=n-i.length,R=g[U];E.pushModal({key:"file-content-preview",modal:{key:"file-content-preview",modal:S("uwu",R.url,R.size),animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}})})}const F=a.findByName("RowManager");function z(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown";return{borderColor:-251658241,backgroundColor:-13947599,thumbnailCornerRadius:15,headerColor:-4867391,headerText:"",acceptLabelBackgroundColor:-14441126,titleText:"FILE \u2014 "+(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"? bytes"),type:null,extendedType:4,participantAvatarUris:[],acceptLabelText:"Preview",noParticipantsText:`
`+t,ctaEnabled:!0}}function D(){return d.after("generate",F.prototype,function(t,s){let[u]=t,{message:n}=s;if(u.rowType!=1||!n.attachments)return;let o=[],l=[];n.attachments.forEach(function(r){r.filename.toLowerCase().endsWith(".txt")?o.push(z(r.filename,r.size)):l.push(r)}),o.length&&(n.codedLinks.push(...o),n.attachments=l)})}let f=[];var V={onLoad:function(){f.push(A()),f.push(D())},onUnload:function(){for(const t of f)t()}};return c.default=V,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.metro,vendetta.patcher,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.metro.common,vendetta.ui.components);
