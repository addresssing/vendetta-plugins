(function(l,s,d,o,S,v,t,u,g,w){"use strict";const{Text:P}=S.General,R=o.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:N}}=o.findByProps("colors","meta"),T=o.findByStoreName("UserStore"),C=o.findByStoreName("RelationshipStore"),E=o.findByStoreName("GuildMemberStore"),h=o.findByProps("TYPING_WRAPPER_HEIGHT");function _(){return d.after("default",h,function(r,y){let[{channel:p}]=r;if(!y||!t.storage.show.showTyping)return;const A=y.props?.children,I=N(R.theme,v.semanticColors.HEADER_SECONDARY),O=d.after("type",A,function(M,F){s.React.useEffect(function(){return function(){O()}},[]);const a=F?.props?.children?.[0]?.props?.children?.[1]?.props;if(!a||!a.children||a.children==="Several people are typing...")return;const e=h.useTypingUserIds(p.id).map(function(n){const i=E.getMember(p.guild_id,n),m=T.getUser(n),G=i?.nick||C.getNickname(n)||m.globalName||m.username,L=i?.colorString||I;return{displayName:G,displayColor:L}});function c(n){return s.React.createElement(P,{style:{color:n.displayColor,fontFamily:s.constants.Fonts.DISPLAY_BOLD}},n.displayName)}!e||e.length<1||(a.children=e.length===1?[c(e[0])," is typing..."]:[...e.slice(0,e.length-1).flatMap(function(n,i){return[c(n),i<e.length-2?", ":" and "]}),c(e[e.length-1])," are typing..."])})})}const b={Typing:w.getAssetIDByName("ic_messages")};function B(){return g.useProxy(t.storage),React.createElement(s.ReactNative.ScrollView,{style:{flex:1}},React.createElement(FormSection,{title:"Where to show the top role color?",titleStyleType:"no_border"},React.createElement(u.FormSwitchRow,{label:"Show in typing",subLabel:"Display the top role color in the typing bar.",leading:React.createElement(u.FormIcon,{source:b.Typing}),value:t.storage.show?.showTyping,onValueChange:function(r){return t.storage.show.showTyping=r}})))}let f=[];var D={onLoad:function(){console.log("ON LOAD WORKS"),t.storage.show||(console.log("CP inside 1"),g.useProxy(t.storage),console.log("it's here"),console.log(t.storage),t.storage.show={showTyping:!0},console.log("CP inside 2")),console.log("CP 1"),f.push(_()),console.log("CP 2")},onUnload:function(){for(const r of f)r()},settings:B};return l.default=D,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro.common,vendetta.patcher,vendetta.metro,vendetta.ui.components,vendetta.ui,vendetta.plugin,vendetta.ui.components.Forms,vendetta.storage,vendetta.ui.assets);
