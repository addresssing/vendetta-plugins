(function(c,o,d,y,a,g){"use strict";const{View:p,TouchableOpacity:E}=g.General,{FormIcon:v,FormText:R}=g.Forms,{ActivityIndicator:w}=a.ReactNative,{default:b,getRenderCloseButton:C}=o.findByProps("getRenderCloseButton"),h=o.findByProps("pushModal"),T=y.getAssetIDByName("ic_download_24px");function L(e){return function(){return a.React.createElement(E,{onPress:e},a.React.createElement(v,{source:T,style:{marginRight:8,marginLeft:-8,opacity:1}}))}}function N(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown",u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"https://cdn.discordapp.com/attachments/593084706593964043/1143675462376239236/SPOILER_a.txt";return function(){const[i,t]=a.React.useState("");fetch(u,{headers:{Range:"bytes=0-10000"}}).then(function(n){n.ok?n.text().then(function(l){t(l)}):t("Error reading file content: Network response was not ok")});let r=a.React.createElement(p,{style:{margin:32}},a.React.createElement(w,{size:"large"})),s=a.React.createElement(p,{style:{margin:15}},a.React.createElement(R,null,i));return a.React.createElement(b,{initialRouteName:"FILE_CONTENT_PREVIEW",screens:{FILE_CONTENT_PREVIEW:{headerLeft:C(function(){return h.popModal("file-content-preview")}),headerRight:L(function(){console.log("uwu")}),render:function(){return i?s:r},title:e.toUpperCase()}}})}}const k=o.findByStoreName("MessageStore"),I=o.findByStoreName("SelectedChannelStore");function x(){return d.after("render",o.findByName("Chat").prototype,function(e,u){d.before("onTapInviteEmbed",u.props,function(i){let[{nativeEvent:{index:t,messageId:r}}]=i,s=I.getChannelId(),n=k.getMessage(s,r),l=n.codedLinks,S=n.attachments;if(t>=l.length){let F=t-l.length,m=S[F];h.pushModal({key:"file-content-preview",modal:{key:"file-content-preview",modal:N("uwu",m.url,m.size),animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}})})}const B=o.findByName("RowManager");function P(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown";return{borderColor:-251658241,backgroundColor:-13947599,thumbnailCornerRadius:15,headerColor:-4867391,headerText:"",acceptLabelBackgroundColor:-14441126,titleText:"FILE \u2014 "+(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"? bytes"),type:null,extendedType:4,participantAvatarUris:[],acceptLabelText:"Preview",noParticipantsText:`
`+e,ctaEnabled:!0}}function _(){return d.after("generate",B.prototype,function(e,u){let[i]=e,{message:t}=u;if(i.rowType!=1||!t.attachments)return;let r=[],s=[];t.attachments.forEach(function(n){n.filename.toLowerCase().endsWith(".txt")?r.push(P(n.filename,n.size)):s.push(n)}),r.length&&(t.codedLinks.push(...r),t.attachments=s)})}let f=[];var M={onLoad:function(){f.push(x()),f.push(_())},onUnload:function(){for(const e of f)e()}};return c.default=M,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.metro.common,vendetta.ui.components);
