(function(c,o,d,y,a,g){"use strict";const{View:p,TouchableOpacity:E}=g.General,{FormIcon:v,FormText:R}=g.Forms,{ActivityIndicator:w}=a.ReactNative,{default:T,getRenderCloseButton:b}=o.findByProps("getRenderCloseButton"),h=o.findByProps("pushModal"),C=y.getAssetIDByName("ic_download_24px");function I(e){return function(){return a.React.createElement(E,{onPress:e},a.React.createElement(v,{source:C,style:{marginRight:8,marginLeft:-8,opacity:1}}))}}function L(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown",i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"https://cdn.discordapp.com/attachments/593084706593964043/1143675462376239236/SPOILER_a.txt";return function(){const[s,t]=a.React.useState("");fetch(i,{headers:{Range:"bytes=0-10000"}}).then(function(n){n.ok?n.text().then(function(l){t(l)}):t("Error reading file content: Network response was not ok")});let r=a.React.createElement(p,{style:{margin:32}},a.React.createElement(w,{size:"large"})),u=a.React.createElement(p,{style:{margin:15}},a.React.createElement(R,null,s));return a.React.createElement(T,{initialRouteName:"FILE_CONTENT_PREVIEW",screens:{FILE_CONTENT_PREVIEW:{headerLeft:b(function(){return h.popModal("file-content-preview")}),headerRight:I(function(){console.log("uwu")}),render:function(){return s?u:r},title:e.toUpperCase()}}})}}const N=o.findByStoreName("MessageStore"),k=o.findByStoreName("SelectedChannelStore");function P(){return d.after("render",o.findByName("Chat").prototype,function(e,i){i.props.hasOwnProperty("onTapInviteEmbed")&&d.before("onTapInviteEmbed",i.props,function(s){let[{nativeEvent:{index:t,messageId:r}}]=s,u=k.getChannelId(),n=N.getMessage(u,r),l=n.codedLinks,S=n.attachments;if(t>=l.length){let F=t-l.length,m=S[F];h.pushModal({key:"file-content-preview",modal:{key:"file-content-preview",modal:L("uwu",m.url,m.size),animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}})})}const x=o.findByName("RowManager");function B(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown";return{borderColor:-251658241,backgroundColor:-13947599,thumbnailCornerRadius:15,headerColor:-4867391,headerText:"",acceptLabelBackgroundColor:-14441126,titleText:"FILE \u2014 "+(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"? bytes"),type:null,extendedType:4,participantAvatarUris:[],acceptLabelText:"Preview",noParticipantsText:`
`+e,ctaEnabled:!0}}function _(){return d.after("generate",x.prototype,function(e,i){let[s]=e,{message:t}=i;if(s.rowType!=1||!t.attachments)return;let r=[],u=[];t.attachments.forEach(function(n){n.filename.toLowerCase().endsWith(".txt")?r.push(B(n.filename,n.size)):u.push(n)}),r.length&&(t.codedLinks.push(...r),t.attachments=u)})}let f=[];var M={onLoad:function(){f.push(P()),f.push(_())},onUnload:function(){for(const e of f)e()}};return c.default=M,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.metro.common,vendetta.ui.components);
