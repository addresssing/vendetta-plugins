(function(c,o,l,y,n,f){"use strict";const{View:g,TouchableOpacity:E}=f.General,{FormIcon:v,FormText:R}=f.Forms,{ActivityIndicator:w}=n.ReactNative,{default:b,getRenderCloseButton:C}=o.findByProps("getRenderCloseButton"),p=o.findByProps("pushModal"),T=y.getAssetIDByName("ic_download_24px");function L(e){return function(){return n.React.createElement(E,{onPress:e},n.React.createElement(v,{source:T,style:{marginRight:8,marginLeft:-8,opacity:1}}))}}function N(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown",u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"https://cdn.discordapp.com/attachments/593084706593964043/1143675462376239236/SPOILER_a.txt";return function(){const[i,t]=n.React.useState("");return fetch(u,{headers:{Range:"bytes=0-100"}}).then(function(a){a.ok?a.text().then(function(s){t(s)}):t("Error reading file content: Network response was not ok")}),n.React.createElement(b,{initialRouteName:"FILE_CONTENT_PREVIEW",screens:{FILE_CONTENT_PREVIEW:{headerLeft:C(function(){return p.popModal("file-content-preview")}),headerRight:L(function(){console.log("uwu")}),render:function(){return i?n.React.createElement(g,{style:{margin:32}},n.React.createElement(w,{size:"large"})):n.React.createElement(g,{style:{margin:15}},n.React.createElement(R,null,i))},title:e.toUpperCase()}}})}}const k=o.findByStoreName("MessageStore"),I=o.findByStoreName("SelectedChannelStore");function x(){return l.after("render",o.findByName("Chat").prototype,function(e,u){l.before("onTapInviteEmbed",u.props,function(i){let[{nativeEvent:{index:t,messageId:a}}]=i,s=I.getChannelId(),r=k.getMessage(s,a),h=r.codedLinks,S=r.attachments;if(t>=h.length){let F=t-h.length,m=S[F];p.pushModal({key:"file-content-preview",modal:{key:"file-content-preview",modal:N("uwu",m.url,m.size),animation:"slide-up",shouldPersistUnderModals:!1,closable:!0}})}})})}const B=o.findByName("RowManager");function P(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"unknown";return{borderColor:-251658241,backgroundColor:-13947599,thumbnailCornerRadius:15,headerColor:-4867391,headerText:"",acceptLabelBackgroundColor:-14441126,titleText:"FILE \u2014 "+(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"? bytes"),type:null,extendedType:4,participantAvatarUris:[],acceptLabelText:"Preview",noParticipantsText:`
`+e,ctaEnabled:!0}}function _(){return l.after("generate",B.prototype,function(e,u){let[i]=e,{message:t}=u;if(i.rowType!=1||!t.attachments)return;let a=[],s=[];t.attachments.forEach(function(r){r.filename.toLowerCase().endsWith(".txt")?a.push(P(r.filename,r.size)):s.push(r)}),a.length&&(t.codedLinks.push(...a),t.attachments=s)})}let d=[];var M={onLoad:function(){d.push(x()),d.push(_())},onUnload:function(){for(const e of d)e()}};return c.default=M,Object.defineProperty(c,"__esModule",{value:!0}),c})({},vendetta.metro,vendetta.patcher,vendetta.ui.assets,vendetta.metro.common,vendetta.ui.components);
