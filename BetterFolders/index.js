(function(v,l,i,e,g,I,b,w,T){"use strict";const{getGuildFolders:U}=i.findByStoreName("UserSettingsProtoStore"),{isFolderExpanded:V}=i.findByStoreName("ExpandedGuildFolderStore");function y(){U().filter(function(t){return t.folderId&&!V(t.folderId)}).forEach(function(t){let{folderId:n}=t;e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:n}),e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:n})})}const{View:N,Image:P}=b.General;function $(){let t=I.after("GuildContainer",i.findByPropsAll("GuildContainer").at(-1),function(n,s){let[r]=n;var o;if(!l.storage.hideIcons)return;let a=r==null||(o=r.children)===null||o===void 0?void 0:o.type;if(!a?.type){var d,c,f,C,_,F,G;if(r.expanded)return;let u=r==null||(d=r.children)===null||d===void 0?void 0:d.props;if(!(!(u==null||(c=u.children)===null||c===void 0)&&c[1]))return;let E=u==null||(G=u.children)===null||G===void 0||(F=G[0])===null||F===void 0||(_=F.props)===null||_===void 0||(C=_.style)===null||C===void 0||(f=C[1])===null||f===void 0?void 0:f.backgroundColor;if(!E)return;u.children[1]=e.React.createElement(N,{style:{overflow:"hidden",borderRadius:16,justifyContent:"center",alignItems:"center",height:48,width:48}},e.React.createElement(P,{source:g.getAssetIDByName("img_guild_folder"),style:{tintColor:E}}));return}let Q=I.after("type",a,function(u,E){let[x]=u;Q(),!r.expanded&&(E.props.children[1]=e.React.createElement(N,{style:{overflow:"hidden",borderRadius:16,justifyContent:"center",alignItems:"center",height:48,width:48}},e.React.createElement(P,{source:g.getAssetIDByName("img_guild_folder"),style:x.folderColor?{tintColor:`#${x.folderColor.toString(16)}`}:{}})))})});return y(),function(){setTimeout(function(){return y()},100),t()}}const{getGuildFolders:X}=i.findByStoreName("UserSettingsProtoStore"),{isFolderExpanded:S}=i.findByStoreName("ExpandedGuildFolderStore");function j(){let t=function(n){let{folderId:s}=n;l.storage.autoCollapse&&S(s)&&X().filter(function(r){return r.folderId&&S(r.folderId)}).forEach(function(r){let{folderId:o}=r;o!==s&&e.FluxDispatcher.dispatch({type:"TOGGLE_GUILD_FOLDER_EXPAND",folderId:o})})};return e.FluxDispatcher.subscribe("TOGGLE_GUILD_FOLDER_EXPAND",t),function(){return e.FluxDispatcher.unsubscribe("TOGGLE_GUILD_FOLDER_EXPAND",t)}}const{useState:M}=e.React,{Pressable:k,Animated:h}=e.ReactNative;function B(t){let{onPress:n,children:s,color:r,pressedColor:o}=t;const[a]=M(new h.Value(0)),d=a.interpolate({inputRange:[0,1],outputRange:[r,o]}),c=function(){h.timing(a,{toValue:1,duration:200,useNativeDriver:!1}).start()},f=function(){h.timing(a,{toValue:0,duration:200,useNativeDriver:!1}).start()};return e.React.createElement(k,{onPress:n,onPressIn:c,onPressOut:f},e.React.createElement(h.View,{style:{backgroundColor:d}},s))}const{FormSwitch:L,FormRow:A,FormIcon:O}=b.Forms,{ScrollView:H}=e.ReactNative,K=i.findByStoreName("ThemeStore"),{meta:{resolveSemanticColor:q}}=i.findByProps("colors","meta"),p={bgBrighter:q(K.theme,T.semanticColors.BACKGROUND_ACCENT)};var R=!0;function z(){w.useProxy(l.storage);const[t,n]=e.React.useState(l.storage.autoCollapse),[s,r]=e.React.useState(l.storage.hideIcons);function o(){l.storage.autoCollapse=!l.storage.autoCollapse,n(l.storage.autoCollapse)}function a(){if(l.storage.hideIcons=!l.storage.hideIcons,R){let d=I.after("useIsModalOpen",i.findByProps("useIsModalOpen"),function(){d(),setTimeout(function(){return y()},100),R=!0});R=!1}r(l.storage.hideIcons)}return e.React.createElement(H,{style:{flex:1,marginTop:10}},e.React.createElement(B,{onPress:o,color:p.bgBrighter+"00",pressedColor:p.bgBrighter+"FF"},e.React.createElement(A,{label:"Auto collapse",subLabel:"Automatically collapse folders as you expand different ones.",leading:e.React.createElement(O,{source:g.getAssetIDByName("ic_minus_circle_24px")}),trailing:e.React.createElement(L,{value:t,onValueChange:o})})),e.React.createElement(B,{onPress:a,color:p.bgBrighter+"00",pressedColor:p.bgBrighter+"FF"},e.React.createElement(A,{label:"Hide icons",subLabel:"Don't display server icons for collapsed folders.",leading:e.React.createElement(O,{source:g.getAssetIDByName("ic_hide")}),trailing:e.React.createElement(L,{value:s,onValueChange:a})})))}let D=[];var J={onLoad:function(){var t,n;(t=l.storage).hideIcons??(t.hideIcons=!1),(n=l.storage).autoCollapse??(n.autoCollapse=!1),D.push($()),D.push(j())},onUnload:function(){for(const t of D)t()},settings:z};return v.default=J,Object.defineProperty(v,"__esModule",{value:!0}),v})({},vendetta.plugin,vendetta.metro,vendetta.metro.common,vendetta.ui.assets,vendetta.patcher,vendetta.ui.components,vendetta.storage,vendetta.ui);
